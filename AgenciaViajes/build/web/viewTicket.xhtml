<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <link rel="stylesheet" href="css/bootstrap.css"/>
        <link rel="stylesheet" href="css/styleLogin.css"/>
        <title>Tiquete</title>
    </h:head>
    <h:body>
        <ui:include src="/header.xhtml"></ui:include> 
        <c:if test="${email == null}">
            <h:form>
                <h1 style="text-align: center;"><h:outputText value="Aún no ha iniciado sesión, por favor incie sesión "/><h:commandLink action="login" value="Aquí"/></h1>
            </h:form>
        </c:if>
        <c:if test="${email != null}">
        <h:form id="FormAdd" style="margin-left: 25%;">                
            <div class="panel panel-default" style="width: 70%; border-bottom-left-radius: 2em; border-bottom-right-radius: 2em;border-top-left-radius: 2em; border-top-right-radius: 2em;">
                <div class="panel-heading" style="border-top-left-radius: 2em; border-top-right-radius: 2em; text-align: center;"><strong><h2>Tiquete ${role}</h2></strong></div>
                <div class="panel-body">
                    <table id="example" class="display table-striped" cellspacing="0" width="100%">
                    
                           <tbody>
                               <ui:repeat var="plan" value="#{managePlan.plansList}">
                           <tr>
                               <td>Nombre del Plan:</td> 
                               <td>#{plan.name}</td>
                               <td>Nombre del Viajero:</td>
                               <td> ${firstname} ${lastname}</td>
                           </tr>
                           <tr>
                               <td>Ciudad de Salida:</td> 
                               <td>#{plan.departureCity}</td>
                               <td>Correo de Contacto:</td> 
                               <td>${email}</td>
                           </tr>
                           <tr>
                               <td>Ciudad Destino:</td> 
                               <td>#{plan.arrivalCity}</td>
                               <td>Telefono del Viajero :</td> 
                               <td>${phone}</td>
                           </tr>
                           <tr>
                               <td>Fecha de Salida:</td> 
                               <td>#{plan.departureDate}</td>
                               <td>Fecha de regreso:</td> 
                               <td>#{plan.returnDate}</td>                               
                           </tr>
                           <tr>
                               <td>Tipo documento</td> 
                               <td>${documentType}</td>
                               <td>Número documento</td> 
                               <td>${document}</td>
                           </tr>   
                           <tr>
                               <td>Nombre del Hotel:</td> 
                               <td>#{managePlan.getHotelName(plan.hotelId)}</td>
                               <td>Costo del Hotel</td> 
                               <td>#{managePlan.getHotelCost(plan.hotelId)}</td>
                           </tr>                           
                           <tr>
                               <td>Costo por Adulto:</td> 
                               <td>#{plan.baseCostByAdult}</td>
                               <td>Costo por Niño:</td> 
                               <td>#{plan.baseCostByChild}</td>
                            </tr>
                            <tr>
                               <td>Número adultos:</td> 
                               <td>${quantityAdult}</td>
                               <td>Número niños:</td> 
                               <td>#{quantityChild}</td>
                            </tr>
                            <tr>                              
                               <td>Modo de Transporte:</td> 
                               <td>#{plan.modeTransport}</td>                        
                               <td>Total:</td> 
                               <td>${total}</td>
                            </tr>
                                   
                           </ui:repeat>  
                           </tbody>                             
                    </table>       
                    
            </div>
            </div>     
            <h:commandButton action="showTicketUser" value="Ver mis tiquetes &raquo;" style="margin-left: 25%;" class="btn btn-success btn-lg"/>                           
                        
        </h:form>
        </c:if>        
    </h:body>
</html>